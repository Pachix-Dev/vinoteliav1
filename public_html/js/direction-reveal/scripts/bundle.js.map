{"version":3,"sources":["node_modules/browser-pack/_prelude.js","scripts/direction-reveal.js","scripts/main.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\n/**\n  Direction aware content reveals.\n\n  @param {Object} object - Container for all options.\n  @param {string} selector - Container element selector.\n  @param {string} itemSelector - Item element selector.\n  @param {string} animationName - Animation CSS class.\n  @param {boolean} enableTouch  - Adds touch event to show content on first click then follow link on the second click.\n  @param {integer} touchThreshold - Touch length must be less than this to trigger reveal which prevents the event triggering if user is scrolling.\n*/\n\n\nconst DirectionReveal = function ({\n  selector: selector = '.direction-reveal',\n  itemSelector: itemSelector = '.direction-reveal__card',\n  animationName: animationName = 'swing',\n  enableTouch: enableTouch = true,\n  touchThreshold: touchThreshold = 250\n  } = {}) {\n\n  const containers = document.querySelectorAll(selector);\n  let touchStart;\n\n\n  const getDirection = function (e, item) {\n    // Width and height of current item\n    let w = item.offsetWidth;\n    let h = item.offsetHeight;\n    let position = getPosition(item);\n\n    // Calculate the x/y value of the pointer entering/exiting, relative to the center of the item.\n    let x = (e.pageX - position.x - (w / 2) * (w > h ? (h / w) : 1));\n    let y = (e.pageY - position.y - (h / 2) * (h > w ? (w / h) : 1));\n\n    // Calculate the angle the pointer entered/exited and convert to clockwise format (top/right/bottom/left = 0/1/2/3).  See https://stackoverflow.com/a/3647634 for a full explanation.\n    let d = Math.round(Math.atan2(y, x) / 1.57079633 + 5) % 4;\n\n    // console.table([x, y, w, h, e.pageX, e.pageY, item.offsetLeft, item.offsetTop, position.x, position.y]);\n\n    return d;\n  };\n\n\n  // https://www.kirupa.com/html5/get_element_position_using_javascript.htm\n  const getPosition = function (el) {\n    let xPos = 0;\n    let yPos = 0;\n\n    while (el) {\n      xPos += (el.offsetLeft + el.clientLeft);\n      yPos += (el.offsetTop + el.clientTop);\n\n      el = el.offsetParent;\n    }\n    return {\n      x: xPos,\n      y: yPos\n    };\n  }\n\n\n  const translateDirection = switchcase({\n    0: 'top',\n    1: 'right',\n    2: 'bottom',\n    3: 'left'\n  })('top');\n\n\n  const addClass = function (e, state) {\n    let currentItem = e.currentTarget;\n    let direction = getDirection(e, currentItem);\n    let directionString = translateDirection(direction);\n\n    // Remove current animation classes and add new ones e.g. swap --in for --out.\n    let currentCssClasses = currentItem.className.split(' ');\n    let filteredCssClasses = currentCssClasses.filter((cssClass) => (!cssClass.startsWith(animationName))).join(' ');\n    currentItem.className = filteredCssClasses;\n    currentItem.classList.add(`${animationName}--${state}-${directionString}`);\n  };\n\n\n  const bindEvents = function (containerItem) {\n    const items = containerItem.querySelectorAll(itemSelector);\n\n    items.forEach((item) => {\n\n      addEventListenerMulti(item, ['mouseenter', 'focus'], (e) => {\n        addClass(e, 'in');\n      });\n\n      addEventListenerMulti(item, ['mouseleave', 'blur'], (e) => {\n        addClass(e, 'out');\n      });\n\n\n      if (enableTouch) {\n\n        item.addEventListener('touchstart', (e) => {\n          touchStart = +new Date;\n        }, { passive: true });\n\n        item.addEventListener('touchend', (e) => {\n          let touchTime = +new Date - touchStart;\n\n          if (touchTime < touchThreshold && !item.className.includes(`${animationName}--in`)) {\n            e.preventDefault();\n\n            resetVisible(e, items, addClass(e, 'in'));\n          }\n        });\n\n      }\n\n    });\n  };\n\n  const addEventListenerMulti = function (element, events, fn) {\n    events.forEach((e) => element.addEventListener(e, fn));\n  }\n\n\n  const resetVisible = function (e, items, callback) {\n\n    items.forEach((item) => {\n      let currentCssClasses = item.className;\n\n      if(currentCssClasses.includes(`${animationName}--in`) && item !== e.currentTarget) {\n        item.className = currentCssClasses.replace(`${animationName}--in`, `${animationName}--out`);\n      }\n    });\n\n    callback;\n  };\n\n\n  const init = function () {\n\n    if (containers.length) {\n      containers.forEach((containerItem) => {\n        bindEvents(containerItem);\n      });\n    }\n    else {\n      return;\n    }\n\n  };\n\n  // Init is called by default\n  init();\n\n\n  // Reveal API\n  return {\n    init\n  };\n};\n\nexport default DirectionReveal;\n\n\n// Better switch cases - https://hackernoon.com/rethinking-javascript-eliminate-the-switch-statement-for-better-code-5c81c044716d\nexport const switchcase = cases => defaultCase => key =>\nkey in cases ? cases[key] : defaultCase;\n","import DirectionReveal from './direction-reveal.js';\n\n// Swing animation(Default)\nconst directionRevealSwing = DirectionReveal({\n  selector: '.direction-reveal--demo-swing'\n});\n\n// Slide animation with all options specified\nconst directionRevealSlide = DirectionReveal({\n  selector: '.direction-reveal--demo-slide',\n  itemSelector: '.direction-reveal__card',\n  animationName: 'slide',\n  enableTouch: true,\n  touchThreshold: 250\n});\n\n// Slide & push\nconst directionRevealSlidePush = DirectionReveal({\n  selector: '.direction-reveal--demo-slide-push',\n  animationName: 'slide'\n});\n\n// Rotate animation\nconst directionRevealRotate = DirectionReveal({\n  selector: '.direction-reveal--demo-rotate',\n  animationName: 'rotate'\n});\n\n// Flip animation\nconst directionRevealFlip = DirectionReveal({\n  selector: '.direction-reveal--demo-flip',\n  animationName: 'flip'\n});\n\n// Bootstrap demo\nconst directionRevealBoostrap = DirectionReveal({\n  selector: '.direction-reveal--demo-bootstrap'\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzY3JpcHRzL2RpcmVjdGlvbi1yZXZlYWwuanMiLCJzY3JpcHRzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNDQTs7Ozs7Ozs7Ozs7QUFZQSxJQUFNLGtCQUFrQixTQUFsQixlQUFrQixHQU1kO0FBQUEsaUZBQUosRUFBSTtBQUFBLDJCQUxSLFFBS1E7QUFBQSxNQUxFLFFBS0YsaUNBTGEsbUJBS2I7QUFBQSwrQkFKUixZQUlRO0FBQUEsTUFKTSxZQUlOLHFDQUpxQix5QkFJckI7QUFBQSxnQ0FIUixhQUdRO0FBQUEsTUFITyxhQUdQLHNDQUh1QixPQUd2QjtBQUFBLDhCQUZSLFdBRVE7QUFBQSxNQUZLLFdBRUwsb0NBRm1CLElBRW5CO0FBQUEsaUNBRFIsY0FDUTtBQUFBLE1BRFEsY0FDUix1Q0FEeUIsR0FDekI7O0FBRVIsTUFBTSxhQUFhLFNBQVMsZ0JBQVQsQ0FBMEIsUUFBMUIsQ0FBbkI7QUFDQSxNQUFJLG1CQUFKOztBQUdBLE1BQU0sZUFBZSxTQUFmLFlBQWUsQ0FBVSxDQUFWLEVBQWEsSUFBYixFQUFtQjtBQUN0QztBQUNBLFFBQUksSUFBSSxLQUFLLFdBQWI7QUFDQSxRQUFJLElBQUksS0FBSyxZQUFiO0FBQ0EsUUFBSSxXQUFXLFlBQVksSUFBWixDQUFmOztBQUVBO0FBQ0EsUUFBSSxJQUFLLEVBQUUsS0FBRixHQUFVLFNBQVMsQ0FBbkIsR0FBd0IsSUFBSSxDQUFMLElBQVcsSUFBSSxDQUFKLEdBQVMsSUFBSSxDQUFiLEdBQWtCLENBQTdCLENBQWhDO0FBQ0EsUUFBSSxJQUFLLEVBQUUsS0FBRixHQUFVLFNBQVMsQ0FBbkIsR0FBd0IsSUFBSSxDQUFMLElBQVcsSUFBSSxDQUFKLEdBQVMsSUFBSSxDQUFiLEdBQWtCLENBQTdCLENBQWhDOztBQUVBO0FBQ0EsUUFBSSxJQUFJLEtBQUssS0FBTCxDQUFXLEtBQUssS0FBTCxDQUFXLENBQVgsRUFBYyxDQUFkLElBQW1CLFVBQW5CLEdBQWdDLENBQTNDLElBQWdELENBQXhEOztBQUVBOztBQUVBLFdBQU8sQ0FBUDtBQUNELEdBaEJEOztBQW1CQTtBQUNBLE1BQU0sY0FBYyxTQUFkLFdBQWMsQ0FBVSxFQUFWLEVBQWM7QUFDaEMsUUFBSSxPQUFPLENBQVg7QUFDQSxRQUFJLE9BQU8sQ0FBWDs7QUFFQSxXQUFPLEVBQVAsRUFBVztBQUNULGNBQVMsR0FBRyxVQUFILEdBQWdCLEdBQUcsVUFBNUI7QUFDQSxjQUFTLEdBQUcsU0FBSCxHQUFlLEdBQUcsU0FBM0I7O0FBRUEsV0FBSyxHQUFHLFlBQVI7QUFDRDtBQUNELFdBQU87QUFDTCxTQUFHLElBREU7QUFFTCxTQUFHO0FBRkUsS0FBUDtBQUlELEdBZEQ7O0FBaUJBLE1BQU0scUJBQXFCLFdBQVc7QUFDcEMsT0FBRyxLQURpQztBQUVwQyxPQUFHLE9BRmlDO0FBR3BDLE9BQUcsUUFIaUM7QUFJcEMsT0FBRztBQUppQyxHQUFYLEVBS3hCLEtBTHdCLENBQTNCOztBQVFBLE1BQU0sV0FBVyxTQUFYLFFBQVcsQ0FBVSxDQUFWLEVBQWEsS0FBYixFQUFvQjtBQUNuQyxRQUFJLGNBQWMsRUFBRSxhQUFwQjtBQUNBLFFBQUksWUFBWSxhQUFhLENBQWIsRUFBZ0IsV0FBaEIsQ0FBaEI7QUFDQSxRQUFJLGtCQUFrQixtQkFBbUIsU0FBbkIsQ0FBdEI7O0FBRUE7QUFDQSxRQUFJLG9CQUFvQixZQUFZLFNBQVosQ0FBc0IsS0FBdEIsQ0FBNEIsR0FBNUIsQ0FBeEI7QUFDQSxRQUFJLHFCQUFxQixrQkFBa0IsTUFBbEIsQ0FBeUIsVUFBQyxRQUFEO0FBQUEsYUFBZSxDQUFDLFNBQVMsVUFBVCxDQUFvQixhQUFwQixDQUFoQjtBQUFBLEtBQXpCLEVBQThFLElBQTlFLENBQW1GLEdBQW5GLENBQXpCO0FBQ0EsZ0JBQVksU0FBWixHQUF3QixrQkFBeEI7QUFDQSxnQkFBWSxTQUFaLENBQXNCLEdBQXRCLENBQTZCLGFBQTdCLFVBQStDLEtBQS9DLFNBQXdELGVBQXhEO0FBQ0QsR0FWRDs7QUFhQSxNQUFNLGFBQWEsU0FBYixVQUFhLENBQVUsYUFBVixFQUF5QjtBQUMxQyxRQUFNLFFBQVEsY0FBYyxnQkFBZCxDQUErQixZQUEvQixDQUFkOztBQUVBLFVBQU0sT0FBTixDQUFjLFVBQUMsSUFBRCxFQUFVOztBQUV0Qiw0QkFBc0IsSUFBdEIsRUFBNEIsQ0FBQyxZQUFELEVBQWUsT0FBZixDQUE1QixFQUFxRCxVQUFDLENBQUQsRUFBTztBQUMxRCxpQkFBUyxDQUFULEVBQVksSUFBWjtBQUNELE9BRkQ7O0FBSUEsNEJBQXNCLElBQXRCLEVBQTRCLENBQUMsWUFBRCxFQUFlLE1BQWYsQ0FBNUIsRUFBb0QsVUFBQyxDQUFELEVBQU87QUFDekQsaUJBQVMsQ0FBVCxFQUFZLEtBQVo7QUFDRCxPQUZEOztBQUtBLFVBQUksV0FBSixFQUFpQjs7QUFFZixhQUFLLGdCQUFMLENBQXNCLFlBQXRCLEVBQW9DLFVBQUMsQ0FBRCxFQUFPO0FBQ3pDLHVCQUFhLENBQUMsSUFBSSxJQUFKLEVBQWQ7QUFDRCxTQUZELEVBRUcsRUFBRSxTQUFTLElBQVgsRUFGSDs7QUFJQSxhQUFLLGdCQUFMLENBQXNCLFVBQXRCLEVBQWtDLFVBQUMsQ0FBRCxFQUFPO0FBQ3ZDLGNBQUksWUFBWSxDQUFDLElBQUksSUFBSixFQUFELEdBQVksVUFBNUI7O0FBRUEsY0FBSSxZQUFZLGNBQVosSUFBOEIsQ0FBQyxLQUFLLFNBQUwsQ0FBZSxRQUFmLENBQTJCLGFBQTNCLFVBQW5DLEVBQW9GO0FBQ2xGLGNBQUUsY0FBRjs7QUFFQSx5QkFBYSxDQUFiLEVBQWdCLEtBQWhCLEVBQXVCLFNBQVMsQ0FBVCxFQUFZLElBQVosQ0FBdkI7QUFDRDtBQUNGLFNBUkQ7QUFVRDtBQUVGLEtBN0JEO0FBOEJELEdBakNEOztBQW1DQSxNQUFNLHdCQUF3QixTQUF4QixxQkFBd0IsQ0FBVSxPQUFWLEVBQW1CLE1BQW5CLEVBQTJCLEVBQTNCLEVBQStCO0FBQzNELFdBQU8sT0FBUCxDQUFlLFVBQUMsQ0FBRDtBQUFBLGFBQU8sUUFBUSxnQkFBUixDQUF5QixDQUF6QixFQUE0QixFQUE1QixDQUFQO0FBQUEsS0FBZjtBQUNELEdBRkQ7O0FBS0EsTUFBTSxlQUFlLFNBQWYsWUFBZSxDQUFVLENBQVYsRUFBYSxLQUFiLEVBQW9CLFFBQXBCLEVBQThCOztBQUVqRCxVQUFNLE9BQU4sQ0FBYyxVQUFDLElBQUQsRUFBVTtBQUN0QixVQUFJLG9CQUFvQixLQUFLLFNBQTdCOztBQUVBLFVBQUcsa0JBQWtCLFFBQWxCLENBQThCLGFBQTlCLGNBQXNELFNBQVMsRUFBRSxhQUFwRSxFQUFtRjtBQUNqRixhQUFLLFNBQUwsR0FBaUIsa0JBQWtCLE9BQWxCLENBQTZCLGFBQTdCLFdBQXFELGFBQXJELFdBQWpCO0FBQ0Q7QUFDRixLQU5EOztBQVFBO0FBQ0QsR0FYRDs7QUFjQSxNQUFNLE9BQU8sU0FBUCxJQUFPLEdBQVk7O0FBRXZCLFFBQUksV0FBVyxNQUFmLEVBQXVCO0FBQ3JCLGlCQUFXLE9BQVgsQ0FBbUIsVUFBQyxhQUFELEVBQW1CO0FBQ3BDLG1CQUFXLGFBQVg7QUFDRCxPQUZEO0FBR0QsS0FKRCxNQUtLO0FBQ0g7QUFDRDtBQUVGLEdBWEQ7O0FBYUE7QUFDQTs7QUFHQTtBQUNBLFNBQU87QUFDTDtBQURLLEdBQVA7QUFHRCxDQWpKRDs7a0JBbUplLGU7O0FBR2Y7O0FBQ08sSUFBTSxrQ0FBYSxTQUFiLFVBQWE7QUFBQSxTQUFTO0FBQUEsV0FBZTtBQUFBLGFBQ2xELE9BQU8sS0FBUCxHQUFlLE1BQU0sR0FBTixDQUFmLEdBQTRCLFdBRHNCO0FBQUEsS0FBZjtBQUFBLEdBQVQ7QUFBQSxDQUFuQjs7Ozs7QUNwS1A7Ozs7OztBQUVBO0FBQ0EsSUFBTSx1QkFBdUIsK0JBQWdCO0FBQzNDLFlBQVU7QUFEaUMsQ0FBaEIsQ0FBN0I7O0FBSUE7QUFDQSxJQUFNLHVCQUF1QiwrQkFBZ0I7QUFDM0MsWUFBVSwrQkFEaUM7QUFFM0MsZ0JBQWMseUJBRjZCO0FBRzNDLGlCQUFlLE9BSDRCO0FBSTNDLGVBQWEsSUFKOEI7QUFLM0Msa0JBQWdCO0FBTDJCLENBQWhCLENBQTdCOztBQVFBO0FBQ0EsSUFBTSwyQkFBMkIsK0JBQWdCO0FBQy9DLFlBQVUsb0NBRHFDO0FBRS9DLGlCQUFlO0FBRmdDLENBQWhCLENBQWpDOztBQUtBO0FBQ0EsSUFBTSx3QkFBd0IsK0JBQWdCO0FBQzVDLFlBQVUsZ0NBRGtDO0FBRTVDLGlCQUFlO0FBRjZCLENBQWhCLENBQTlCOztBQUtBO0FBQ0EsSUFBTSxzQkFBc0IsK0JBQWdCO0FBQzFDLFlBQVUsOEJBRGdDO0FBRTFDLGlCQUFlO0FBRjJCLENBQWhCLENBQTVCOztBQUtBO0FBQ0EsSUFBTSwwQkFBMEIsK0JBQWdCO0FBQzlDLFlBQVU7QUFEb0MsQ0FBaEIsQ0FBaEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcbi8qKlxuICBEaXJlY3Rpb24gYXdhcmUgY29udGVudCByZXZlYWxzLlxuXG4gIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgLSBDb250YWluZXIgZm9yIGFsbCBvcHRpb25zLlxuICBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgLSBDb250YWluZXIgZWxlbWVudCBzZWxlY3Rvci5cbiAgQHBhcmFtIHtzdHJpbmd9IGl0ZW1TZWxlY3RvciAtIEl0ZW0gZWxlbWVudCBzZWxlY3Rvci5cbiAgQHBhcmFtIHtzdHJpbmd9IGFuaW1hdGlvbk5hbWUgLSBBbmltYXRpb24gQ1NTIGNsYXNzLlxuICBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZVRvdWNoICAtIEFkZHMgdG91Y2ggZXZlbnQgdG8gc2hvdyBjb250ZW50IG9uIGZpcnN0IGNsaWNrIHRoZW4gZm9sbG93IGxpbmsgb24gdGhlIHNlY29uZCBjbGljay5cbiAgQHBhcmFtIHtpbnRlZ2VyfSB0b3VjaFRocmVzaG9sZCAtIFRvdWNoIGxlbmd0aCBtdXN0IGJlIGxlc3MgdGhhbiB0aGlzIHRvIHRyaWdnZXIgcmV2ZWFsIHdoaWNoIHByZXZlbnRzIHRoZSBldmVudCB0cmlnZ2VyaW5nIGlmIHVzZXIgaXMgc2Nyb2xsaW5nLlxuKi9cblxuXG5jb25zdCBEaXJlY3Rpb25SZXZlYWwgPSBmdW5jdGlvbiAoe1xuICBzZWxlY3Rvcjogc2VsZWN0b3IgPSAnLmRpcmVjdGlvbi1yZXZlYWwnLFxuICBpdGVtU2VsZWN0b3I6IGl0ZW1TZWxlY3RvciA9ICcuZGlyZWN0aW9uLXJldmVhbF9fY2FyZCcsXG4gIGFuaW1hdGlvbk5hbWU6IGFuaW1hdGlvbk5hbWUgPSAnc3dpbmcnLFxuICBlbmFibGVUb3VjaDogZW5hYmxlVG91Y2ggPSB0cnVlLFxuICB0b3VjaFRocmVzaG9sZDogdG91Y2hUaHJlc2hvbGQgPSAyNTBcbiAgfSA9IHt9KSB7XG5cbiAgY29uc3QgY29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICBsZXQgdG91Y2hTdGFydDtcblxuXG4gIGNvbnN0IGdldERpcmVjdGlvbiA9IGZ1bmN0aW9uIChlLCBpdGVtKSB7XG4gICAgLy8gV2lkdGggYW5kIGhlaWdodCBvZiBjdXJyZW50IGl0ZW1cbiAgICBsZXQgdyA9IGl0ZW0ub2Zmc2V0V2lkdGg7XG4gICAgbGV0IGggPSBpdGVtLm9mZnNldEhlaWdodDtcbiAgICBsZXQgcG9zaXRpb24gPSBnZXRQb3NpdGlvbihpdGVtKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgeC95IHZhbHVlIG9mIHRoZSBwb2ludGVyIGVudGVyaW5nL2V4aXRpbmcsIHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGl0ZW0uXG4gICAgbGV0IHggPSAoZS5wYWdlWCAtIHBvc2l0aW9uLnggLSAodyAvIDIpICogKHcgPiBoID8gKGggLyB3KSA6IDEpKTtcbiAgICBsZXQgeSA9IChlLnBhZ2VZIC0gcG9zaXRpb24ueSAtIChoIC8gMikgKiAoaCA+IHcgPyAodyAvIGgpIDogMSkpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBhbmdsZSB0aGUgcG9pbnRlciBlbnRlcmVkL2V4aXRlZCBhbmQgY29udmVydCB0byBjbG9ja3dpc2UgZm9ybWF0ICh0b3AvcmlnaHQvYm90dG9tL2xlZnQgPSAwLzEvMi8zKS4gIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzY0NzYzNCBmb3IgYSBmdWxsIGV4cGxhbmF0aW9uLlxuICAgIGxldCBkID0gTWF0aC5yb3VuZChNYXRoLmF0YW4yKHksIHgpIC8gMS41NzA3OTYzMyArIDUpICUgNDtcblxuICAgIC8vIGNvbnNvbGUudGFibGUoW3gsIHksIHcsIGgsIGUucGFnZVgsIGUucGFnZVksIGl0ZW0ub2Zmc2V0TGVmdCwgaXRlbS5vZmZzZXRUb3AsIHBvc2l0aW9uLngsIHBvc2l0aW9uLnldKTtcblxuICAgIHJldHVybiBkO1xuICB9O1xuXG5cbiAgLy8gaHR0cHM6Ly93d3cua2lydXBhLmNvbS9odG1sNS9nZXRfZWxlbWVudF9wb3NpdGlvbl91c2luZ19qYXZhc2NyaXB0Lmh0bVxuICBjb25zdCBnZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGxldCB4UG9zID0gMDtcbiAgICBsZXQgeVBvcyA9IDA7XG5cbiAgICB3aGlsZSAoZWwpIHtcbiAgICAgIHhQb3MgKz0gKGVsLm9mZnNldExlZnQgKyBlbC5jbGllbnRMZWZ0KTtcbiAgICAgIHlQb3MgKz0gKGVsLm9mZnNldFRvcCArIGVsLmNsaWVudFRvcCk7XG5cbiAgICAgIGVsID0gZWwub2Zmc2V0UGFyZW50O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgeDogeFBvcyxcbiAgICAgIHk6IHlQb3NcbiAgICB9O1xuICB9XG5cblxuICBjb25zdCB0cmFuc2xhdGVEaXJlY3Rpb24gPSBzd2l0Y2hjYXNlKHtcbiAgICAwOiAndG9wJyxcbiAgICAxOiAncmlnaHQnLFxuICAgIDI6ICdib3R0b20nLFxuICAgIDM6ICdsZWZ0J1xuICB9KSgndG9wJyk7XG5cblxuICBjb25zdCBhZGRDbGFzcyA9IGZ1bmN0aW9uIChlLCBzdGF0ZSkge1xuICAgIGxldCBjdXJyZW50SXRlbSA9IGUuY3VycmVudFRhcmdldDtcbiAgICBsZXQgZGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGUsIGN1cnJlbnRJdGVtKTtcbiAgICBsZXQgZGlyZWN0aW9uU3RyaW5nID0gdHJhbnNsYXRlRGlyZWN0aW9uKGRpcmVjdGlvbik7XG5cbiAgICAvLyBSZW1vdmUgY3VycmVudCBhbmltYXRpb24gY2xhc3NlcyBhbmQgYWRkIG5ldyBvbmVzIGUuZy4gc3dhcCAtLWluIGZvciAtLW91dC5cbiAgICBsZXQgY3VycmVudENzc0NsYXNzZXMgPSBjdXJyZW50SXRlbS5jbGFzc05hbWUuc3BsaXQoJyAnKTtcbiAgICBsZXQgZmlsdGVyZWRDc3NDbGFzc2VzID0gY3VycmVudENzc0NsYXNzZXMuZmlsdGVyKChjc3NDbGFzcykgPT4gKCFjc3NDbGFzcy5zdGFydHNXaXRoKGFuaW1hdGlvbk5hbWUpKSkuam9pbignICcpO1xuICAgIGN1cnJlbnRJdGVtLmNsYXNzTmFtZSA9IGZpbHRlcmVkQ3NzQ2xhc3NlcztcbiAgICBjdXJyZW50SXRlbS5jbGFzc0xpc3QuYWRkKGAke2FuaW1hdGlvbk5hbWV9LS0ke3N0YXRlfS0ke2RpcmVjdGlvblN0cmluZ31gKTtcbiAgfTtcblxuXG4gIGNvbnN0IGJpbmRFdmVudHMgPSBmdW5jdGlvbiAoY29udGFpbmVySXRlbSkge1xuICAgIGNvbnN0IGl0ZW1zID0gY29udGFpbmVySXRlbS5xdWVyeVNlbGVjdG9yQWxsKGl0ZW1TZWxlY3Rvcik7XG5cbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG5cbiAgICAgIGFkZEV2ZW50TGlzdGVuZXJNdWx0aShpdGVtLCBbJ21vdXNlZW50ZXInLCAnZm9jdXMnXSwgKGUpID0+IHtcbiAgICAgICAgYWRkQ2xhc3MoZSwgJ2luJyk7XG4gICAgICB9KTtcblxuICAgICAgYWRkRXZlbnRMaXN0ZW5lck11bHRpKGl0ZW0sIFsnbW91c2VsZWF2ZScsICdibHVyJ10sIChlKSA9PiB7XG4gICAgICAgIGFkZENsYXNzKGUsICdvdXQnKTtcbiAgICAgIH0pO1xuXG5cbiAgICAgIGlmIChlbmFibGVUb3VjaCkge1xuXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgdG91Y2hTdGFydCA9ICtuZXcgRGF0ZTtcbiAgICAgICAgfSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZSkgPT4ge1xuICAgICAgICAgIGxldCB0b3VjaFRpbWUgPSArbmV3IERhdGUgLSB0b3VjaFN0YXJ0O1xuXG4gICAgICAgICAgaWYgKHRvdWNoVGltZSA8IHRvdWNoVGhyZXNob2xkICYmICFpdGVtLmNsYXNzTmFtZS5pbmNsdWRlcyhgJHthbmltYXRpb25OYW1lfS0taW5gKSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICByZXNldFZpc2libGUoZSwgaXRlbXMsIGFkZENsYXNzKGUsICdpbicpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICB9XG5cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBhZGRFdmVudExpc3RlbmVyTXVsdGkgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnRzLCBmbikge1xuICAgIGV2ZW50cy5mb3JFYWNoKChlKSA9PiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZSwgZm4pKTtcbiAgfVxuXG5cbiAgY29uc3QgcmVzZXRWaXNpYmxlID0gZnVuY3Rpb24gKGUsIGl0ZW1zLCBjYWxsYmFjaykge1xuXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRDc3NDbGFzc2VzID0gaXRlbS5jbGFzc05hbWU7XG5cbiAgICAgIGlmKGN1cnJlbnRDc3NDbGFzc2VzLmluY2x1ZGVzKGAke2FuaW1hdGlvbk5hbWV9LS1pbmApICYmIGl0ZW0gIT09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgICBpdGVtLmNsYXNzTmFtZSA9IGN1cnJlbnRDc3NDbGFzc2VzLnJlcGxhY2UoYCR7YW5pbWF0aW9uTmFtZX0tLWluYCwgYCR7YW5pbWF0aW9uTmFtZX0tLW91dGApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY2FsbGJhY2s7XG4gIH07XG5cblxuICBjb25zdCBpbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgaWYgKGNvbnRhaW5lcnMubGVuZ3RoKSB7XG4gICAgICBjb250YWluZXJzLmZvckVhY2goKGNvbnRhaW5lckl0ZW0pID0+IHtcbiAgICAgICAgYmluZEV2ZW50cyhjb250YWluZXJJdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgfTtcblxuICAvLyBJbml0IGlzIGNhbGxlZCBieSBkZWZhdWx0XG4gIGluaXQoKTtcblxuXG4gIC8vIFJldmVhbCBBUElcbiAgcmV0dXJuIHtcbiAgICBpbml0XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBEaXJlY3Rpb25SZXZlYWw7XG5cblxuLy8gQmV0dGVyIHN3aXRjaCBjYXNlcyAtIGh0dHBzOi8vaGFja2Vybm9vbi5jb20vcmV0aGlua2luZy1qYXZhc2NyaXB0LWVsaW1pbmF0ZS10aGUtc3dpdGNoLXN0YXRlbWVudC1mb3ItYmV0dGVyLWNvZGUtNWM4MWMwNDQ3MTZkXG5leHBvcnQgY29uc3Qgc3dpdGNoY2FzZSA9IGNhc2VzID0+IGRlZmF1bHRDYXNlID0+IGtleSA9Plxua2V5IGluIGNhc2VzID8gY2FzZXNba2V5XSA6IGRlZmF1bHRDYXNlO1xuIiwiaW1wb3J0IERpcmVjdGlvblJldmVhbCBmcm9tICcuL2RpcmVjdGlvbi1yZXZlYWwuanMnO1xuXG4vLyBTd2luZyBhbmltYXRpb24oRGVmYXVsdClcbmNvbnN0IGRpcmVjdGlvblJldmVhbFN3aW5nID0gRGlyZWN0aW9uUmV2ZWFsKHtcbiAgc2VsZWN0b3I6ICcuZGlyZWN0aW9uLXJldmVhbC0tZGVtby1zd2luZydcbn0pO1xuXG4vLyBTbGlkZSBhbmltYXRpb24gd2l0aCBhbGwgb3B0aW9ucyBzcGVjaWZpZWRcbmNvbnN0IGRpcmVjdGlvblJldmVhbFNsaWRlID0gRGlyZWN0aW9uUmV2ZWFsKHtcbiAgc2VsZWN0b3I6ICcuZGlyZWN0aW9uLXJldmVhbC0tZGVtby1zbGlkZScsXG4gIGl0ZW1TZWxlY3RvcjogJy5kaXJlY3Rpb24tcmV2ZWFsX19jYXJkJyxcbiAgYW5pbWF0aW9uTmFtZTogJ3NsaWRlJyxcbiAgZW5hYmxlVG91Y2g6IHRydWUsXG4gIHRvdWNoVGhyZXNob2xkOiAyNTBcbn0pO1xuXG4vLyBTbGlkZSAmIHB1c2hcbmNvbnN0IGRpcmVjdGlvblJldmVhbFNsaWRlUHVzaCA9IERpcmVjdGlvblJldmVhbCh7XG4gIHNlbGVjdG9yOiAnLmRpcmVjdGlvbi1yZXZlYWwtLWRlbW8tc2xpZGUtcHVzaCcsXG4gIGFuaW1hdGlvbk5hbWU6ICdzbGlkZSdcbn0pO1xuXG4vLyBSb3RhdGUgYW5pbWF0aW9uXG5jb25zdCBkaXJlY3Rpb25SZXZlYWxSb3RhdGUgPSBEaXJlY3Rpb25SZXZlYWwoe1xuICBzZWxlY3RvcjogJy5kaXJlY3Rpb24tcmV2ZWFsLS1kZW1vLXJvdGF0ZScsXG4gIGFuaW1hdGlvbk5hbWU6ICdyb3RhdGUnXG59KTtcblxuLy8gRmxpcCBhbmltYXRpb25cbmNvbnN0IGRpcmVjdGlvblJldmVhbEZsaXAgPSBEaXJlY3Rpb25SZXZlYWwoe1xuICBzZWxlY3RvcjogJy5kaXJlY3Rpb24tcmV2ZWFsLS1kZW1vLWZsaXAnLFxuICBhbmltYXRpb25OYW1lOiAnZmxpcCdcbn0pO1xuXG4vLyBCb290c3RyYXAgZGVtb1xuY29uc3QgZGlyZWN0aW9uUmV2ZWFsQm9vc3RyYXAgPSBEaXJlY3Rpb25SZXZlYWwoe1xuICBzZWxlY3RvcjogJy5kaXJlY3Rpb24tcmV2ZWFsLS1kZW1vLWJvb3RzdHJhcCdcbn0pO1xuIl19"}